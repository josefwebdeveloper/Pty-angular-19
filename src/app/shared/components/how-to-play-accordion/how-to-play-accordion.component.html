<div class="how-to-play-accordion">
  <div class="accordion-header" (click)="toggleAccordion()">
    <h2>{{ 'HOW_TO_PLAY.TITLE' | translate }}</h2>
    <div class="arrow" [@rotateArrow]="isExpanded ? 'expanded' : 'collapsed'">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
  </div>

  <div class="accordion-content" [@expandCollapse]="isExpanded ? 'expanded' : 'collapsed'">
    <div class="accordion-inner">
      @if (isExpanded) {
        @for (i of [1, 2, 3]; track i) {
          <div class="step" [@fadeInSteps]>
            <div class="step-number">{{i}}</div>
            <div class="step-content">
              <div class="step-text">
                @if (i === 1) {
                  <h3>{{ 'HOW_TO_PLAY.STEP1.TITLE' | translate }}</h3>
                }
                @if (i === 2) {
                  <h3>{{ 'HOW_TO_PLAY.STEP2.TITLE' | translate }}</h3>
                }
                @if (i === 3) {
                  <h3>{{ 'HOW_TO_PLAY.STEP3.TITLE' | translate }}</h3>
                }
                @if (i === 1) {
                  <p>{{ 'HOW_TO_PLAY.STEP1.DESCRIPTION' | translate }}</p>
                }
                @if (i === 2) {
                  <p>{{ 'HOW_TO_PLAY.STEP2.DESCRIPTION' | translate }}</p>
                }
                @if (i === 3) {
                  <p>{{ 'HOW_TO_PLAY.STEP3.DESCRIPTION' | translate }}</p>
                }
              </div>
              <div class="step-icon">
                @if (i === 1) {
                  <img src="assets/corn.svg" alt="{{ 'HOW_TO_PLAY.STEP1.ALT' | translate }}">
                }
                @if (i === 2) {
                  <img src="assets/phone.svg" alt="{{ 'HOW_TO_PLAY.STEP2.ALT' | translate }}">
                }
                @if (i === 3) {
                  <!-- Bee in the accordion uses its own animation state -->
                  <img src="assets/bee.svg" alt="{{ 'HOW_TO_PLAY.STEP3.ALT' | translate }}" [@beeSlideIn]="accordionBeeState">
                }
              </div>
            </div>
          </div>
        }
        <div class="prize-banner" [@fadeInSteps]>
          <div class="new-tag">{{ 'HOW_TO_PLAY.PRIZE_BANNER.NEW' | translate }}</div>
          <div class="prize-text">
            <h3>{{ 'HOW_TO_PLAY.PRIZE_BANNER.LINE1' | translate }}</h3>
            <h3>{{ 'HOW_TO_PLAY.PRIZE_BANNER.LINE2' | translate }}</h3>
          </div>
        </div>
      }
    </div>
  </div>
</div>
